<div class="min-h-screen bg-transparent p-6 md:p-12 font-mono text-gray-300 flex flex-col items-center">

  <div class="w-full max-w-2xl">
    
    <div class="mb-10 border-b border-geek-dim-blue pb-4">
      <h2 class="text-3xl text-geek-blue font-bold mb-2">
        <span class="animate-pulse">></span> ./SEND_MESSAGE.EXE
      </h2>
      <p class="text-sm text-gray-500">Initialisation du protocole de communication...</p>
    </div>

    @if (submitStatus() === 'SUCCESS') {
      <div class="mb-6 p-4 border border-geek-blue bg-geek-blue/10 text-geek-blue rounded">
        > SUCCESS: Packet delivered to server. End of transmission.
      </div>
    }

    @if (submitStatus() === 'ERROR') {
      <div class="mb-6 p-4 border border-red-500 bg-red-900/10 text-red-500 rounded">
        > ERROR: Connection refused or server unreachable. Try again later.
      </div>
    }

    <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="space-y-6">
      
      <div class="flex flex-col space-y-2">
        <label class="text-xs uppercase tracking-widest text-geek-dim-blue">Identity (Name)</label>
        <input 
          formControlName="nom_complet"
          type="text" 
          class="bg-geek-gray border border-gray-700 p-3 text-white focus:outline-none focus:border-geek-blue focus:shadow-[0_0_10px_rgba(0,243,255,0.3)] transition-all duration-300"
          placeholder="Entrez votre nom..."
        >
        @if (contactForm.get('nom_complet')?.invalid && contactForm.get('nom_complet')?.touched) {
          <span class="text-red-500 text-xs">> Error: Identity required.</span>
        }
      </div>

      <div class="flex flex-col space-y-2">
        <label class="text-xs uppercase tracking-widest text-geek-dim-blue">Return Address (Email)</label>
        <input 
          formControlName="email"
          type="email" 
          class="bg-geek-gray border border-gray-700 p-3 text-white focus:outline-none focus:border-geek-blue focus:shadow-[0_0_10px_rgba(0,243,255,0.3)] transition-all duration-300"
          placeholder="user@example.com"
        >
        @if (contactForm.get('email')?.invalid && contactForm.get('email')?.touched) {
          <span class="text-red-500 text-xs">> Error: Invalid protocol (Email).</span>
        }
      </div>

      <div class="flex flex-col space-y-2">
        <label class="text-xs uppercase tracking-widest text-geek-dim-blue">Subject</label>
        <input 
          formControlName="objet"
          type="text" 
          class="bg-geek-gray border border-gray-700 p-3 text-white focus:outline-none focus:border-geek-blue focus:shadow-[0_0_10px_rgba(0,243,255,0.3)] transition-all duration-300"
          placeholder="Proposition de mission..."
        >
      </div>

      <div class="flex flex-col space-y-2">
        <label class="text-xs uppercase tracking-widest text-geek-dim-blue">Payload (Message)</label>
        <textarea 
          formControlName="message"
          rows="6"
          class="bg-geek-gray border border-gray-700 p-3 text-white focus:outline-none focus:border-geek-blue focus:shadow-[0_0_10px_rgba(0,243,255,0.3)] transition-all duration-300 resize-none"
          placeholder="Ã‰crivez votre message ici..."
        ></textarea>
        @if (contactForm.get('message')?.invalid && contactForm.get('message')?.touched) {
          <span class="text-red-500 text-xs">> Error: Payload empty or too short.</span>
        }
      </div>

      <button 
        type="submit" 
        [disabled]="contactForm.invalid || isSending()"
        class="w-full py-4 border border-geek-blue text-geek-blue font-bold uppercase tracking-widest hover:bg-geek-blue hover:text-black transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-2"
      >
        @if (isSending()) {
          <span class="animate-spin h-4 w-4 border-2 border-current border-t-transparent rounded-full"></span>
          UPLOADING...
        } @else {
          [ EXECUTE_SEND ]
        }
      </button>

    </form>
  </div>
  <div class="w-full max-w-4xl mt-12 mb-12">
  <div class="mb-4 text-geek-green text-sm font-bold">
    > TRACEROUTE /LOCATIONS:
  </div>

  <app-map></app-map>
  </div>
</div>